# v0.1.3

Fecha: 2026-02-19

## Estado del MVP

Se consolida la base funcional de tres modulos:

1. Registro y autenticacion
2. Partidos
3. Perfil (`/me`)

## Cambios principales

### 1) Registro y autenticacion

- Registro por email o telefono con OTP.
- Login diario por identificador (`email|telefono`) + password.
- Refresh token rotativo con revocacion de la sesion anterior.
- Logout con revocacion del refresh actual.
- Reset de password con OTP.
- Cooldown de OTP (2 minutos) y control base de intentos de login.
- Persistencia de auth en entidades separadas:
  - `auth_identities`
  - `auth_credentials`
  - `auth_sessions`
  - `auth_login_attempts`

### 2) Partidos (HM, WM, MX)

- Creacion con reglas estrictas:
  - exactamente 4 participantes
  - creador dentro de los 4
  - equipos 2 vs 2
- Determinacion de ladder por combinacion de genero (HM/WM/MX).
- Validaciones de perfil minimo para crear/invitar:
  - canal verificado
  - usuario
  - genero
  - categoria
- Flujo de confirmaciones, verificacion, y manejo de casos idempotentes.
- Aplicacion de ranking al verificar partido.

### 3) Perfil (`/me`)

- Endpoint de elegibilidad de juego ajustado a perfil minimo.
- Enriquecimiento de perfil con campos:
  - `country`
  - `city`
  - `handedness`
  - `preferred_side`
  - `birthdate`
  - `first_name`
  - `last_name`
- Cambio de contacto (email/telefono) con OTP obligatorio:
  - request
  - confirm
  - sincronizacion de identidad verificada en `auth_identities`

## Migraciones incluidas

- `0006_alias_lower_index_backfill.py`
- `0007_sanitize_auth_audit_entity_id.py`
- `0008_email_contact_auth.py`
- `0009_user_contact_change.py`
- `0010_auth_core.py`
- `0011_profile_enrichment.py`

## Verificacion ejecutada

- `scripts/test_ladders_verification.ps1` (HM/WM/MX): OK
- `scripts/test_mx_verification.ps1`: OK
- `python -m compileall backend/app backend/alembic/versions scripts`: OK

